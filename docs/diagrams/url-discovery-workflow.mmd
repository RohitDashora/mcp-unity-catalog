flowchart TD
    A[Start URL Discovery] --> B[Check Databricks CLI]
    B --> C{CLI Configured?}
    C -->|No| D[Configure CLI Profile]
    C -->|Yes| E[Get Workspace URL]
    D --> E
    E --> F[List Catalogs]
    F --> G{Found Catalogs?}
    G -->|No| H[No Unity Catalog Access]
    G -->|Yes| I[For Each Catalog]
    I --> J[List Schemas]
    J --> K{Found Schemas?}
    K -->|No| L[Skip Catalog]
    K -->|Yes| M[For Each Schema]
    L --> N[Next Catalog]
    M --> O[List Vector Indexes]
    O --> P{Found Indexes?}
    P -->|No| Q[Skip Schema]
    P -->|Yes| R[Add to Index List]
    Q --> S[Next Schema]
    R --> S
    S --> T{More Schemas?}
    T -->|Yes| M
    T -->|No| U{More Catalogs?}
    U -->|Yes| I
    U -->|No| V{Found Any Indexes?}
    V -->|No| W[No Vector Indexes Found]
    V -->|Yes| X[Generate MCP Config]
    X --> Y[Save Configuration]
    Y --> Z[Display URLs]
    Z --> AA[Provide Next Steps]
    
    style A fill:#e3f2fd
    style AA fill:#e8f5e8
    style H fill:#ffebee
    style W fill:#ffebee
    style X fill:#fff3e0
    style Y fill:#fff3e0 